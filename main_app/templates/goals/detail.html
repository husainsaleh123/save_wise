<!-- templates/goals/detail.html -->
{% extends 'base.html' %}
{% load static %}

{% block head %}
  <!-- New MCDatepicker CSS -->
  <link href="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'css/mcdp.css' %}">
  <!-- MCDatepicker JS -->
  <script src="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.js"></script>
  <script defer src="{% static 'js/goal-detail.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/goals/goal-detail.css' %}?v={{ ts }}">
{% endblock %}

{% block content %}
  <section class="page-header">
    <h1>Details for {{ goal.name }}</h1>
  </section>

  <section class="goal-container">
    <article class="goal-card">
      <div class="goal-thumb" aria-hidden="true"></div>
      <div class="goal-info">
        <header class="goal-top">
          <h2 class="goal-title">{{ goal.name }}</h2>
          <span class="date-chip">{{ goal.target_date|date:"n/j/Y" }}</span>
        </header>

        <div class="goal-status">
          <span class="dot"></span>
          <span class="status-text">{{ goal.status }}</span>
        </div>

        <p class="goal-desc">{{ goal.description }}</p>
        <p class="amount-row"><strong>Amount saved:</strong> {{ goal.amount_saved|floatformat:3 }}/{{ goal.target_amount|floatformat:3 }}</p>
        <div class="progress">
          <div class="progress-fill"></div>
          <span class="progress-pill">{{ goal.progress }}%</span>
        </div>

        {% if goal.image %}
          <img src="{{ goal.image.url }}" alt="{{ goal.name }}">
        {% endif %}
      </div>
    </article>
  </section>

  <div class="goal-actions">
    <a href="{% url 'goal-update' goal.id %}" class="btn warn">Edit</a>
    <a href="{% url 'goal-delete' goal.id %}" class="btn danger">Delete</a>
    <a href="{% url 'goal-index' %}" class="btn back">Back</a> 
  </div>
{% endblock %}