<!-- templates/main_app/transaction_form.html -->
{% extends 'base.html' %}
{% load static %}

{% block head %}
  <link rel="stylesheet" href="{% static 'css/form.css' %}" />
  <!-- MCDatepicker (optional, if you want a date field for transactions) -->
  <link href="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.js"></script>
  <!-- New MCDatepicker CSS -->
  <script defer src="{% static 'js/transaction-detail.js' %}"></script>
{% endblock %}

{% block content %}
<div class="page-header">
  <h1>See where your money goes. Add a transaction!</h1>
  <button class="back-btn">
    <a href="{% url 'transaction-index' %}">Back to transactions</a>     
  </button>
  {% if transaction %}
    <h1>Edit {{ transaction.name }}</h1>
  {% endif %}
</div>

{% if form.non_field_errors %}
  <ul class="errorlist">
    {% for error in form.non_field_errors %}
      <li style="color:red;">{{ error }}</li>
    {% endfor %}
  </ul>
{% endif %}
<form action="" method="post" class="transaction-form-container" enctype="multipart/form-data">
  {% csrf_token %}

  <div class="form-field">
    <label for="{{ form.image.id_for_label }}">Transaction Image:</label>
    {{ form.image }}
  </div>

    <div class="form-field">
        <label for="transaction-title">Transaction Title</label>
        {{ form.name }}
    </div>
  
  <div class="form-field">
    <label for="transaction-type">Transaction Type*</label>
    {{ form.transaction_type }}
    <small>Select either Income or Expenditure</small>
  </div>

  <div class="form-field">
    <label for="transaction-description">Transaction Description*</label>
    {{ form.description }}
  </div>

  <div class="form-field">
    <label for="transaction-goal">Saving Goal (Optional)</label>
    {{ form.saving_goal }}
    <small>You can leave this empty if not linked to a goal.</small>
  </div>

<div class="form-field">
  <label for="transaction-amount">Total Amount*</label>
  {{ form.amount }}
  {% if form.amount.errors %}
    <ul class="errorlist">
      {% for error in form.amount.errors %}
        <p style="color:red">{{ error }}</p>
      {% endfor %}
    </ul>
  {% endif %}
</div>

<div class="form-field">
  <label for="saving-amount">Saving Portion*</label>
  {{ form.saving_amount }}
  {% if form.saving_amount.errors %}
    <ul class="errorlist">
      {% for error in form.saving_amount.errors %}
        <p style="color:red">{{ error }}</p>
      {% endfor %}
    </ul>
  {% endif %}
</div>

<div class="form-field">
  <label for="checking-amount">Checking Portion*</label>
  {{ form.checking_amount }}
  {% if form.checking_amount.errors %}
    <ul class="errorlist">
      {% for error in form.checking_amount.errors %}
        <p style="color:red">{{ error }}</p>
      {% endfor %}
    </ul>
  {% endif %}
</div>

    <div class="form-field">
    <label for="transaction-date">Transaction Date*</label>
    {{ form.transaction_date }}
     {% if form.transaction_date.errors %}
    <ul class="errorlist">
      {% for error in form.transaction_date.errors %}
        <li style="color: red;">{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  </div>

  <button type="submit" class="btn submit">Submit Transaction</button>
</form>
{% endblock %}
